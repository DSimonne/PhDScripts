did 100 keep 10 run

did mask

applied filter

running 50 keep 5

(devel.p9) p9-07:50_Ar/S1404/pynxraw % python pynx-cdi-analysis.py S1404_pynx_norm_128_300_294_1_1_1-* modes = 1
****************************************************************************
* hwloc 2.1.0 received invalid information from the operating system.
*
* Group0 (cpuset 0x0000000f,0xffffffff,0xfffffff0) intersects with Package (P#0 cpuset 0xffffffff,0xfffffff0 nodeset 0x00000001) without inclusion!
* Error occurred in topology.c line 1443
*
* The following FAQ entry in the hwloc documentation may help:
*   What should I do when hwloc reports "operating system" warnings?
* Otherwise please report this error message to the hwloc user's mailing list,
* along with the files generated by the hwloc-gather-topology script.
* 
* hwloc will now ignore this invalid topology information and continue.
****************************************************************************
--------------------------------------------------------------------------
No OpenFabrics connection schemes reported that they were able to be
used on a specific port.  As such, the openib BTL (OpenFabrics
support) will be disabled for this port.

  Local host:           p9-07
  Local device:         mlx5_0
  Local port:           1
  CPCs attempted:       udcm
--------------------------------------------------------------------------
Importing data files
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T15-55-46_Run0008_LLKf000.1517_LLK5229768753.0518_SupportThreshold0.13351.cxi
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T16-00-03_Run0014_LLKf000.1492_LLK5000025629.9973_SupportThreshold0.13282.cxi
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T16-03-37_Run0019_LLKf000.1540_LLK5083829164.5050_SupportThreshold0.12375.cxi
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T16-05-56_Run0022_LLKf000.1709_LLK5178054571.1517_SupportThreshold0.11183.cxi
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T16-25-13_Run0044_LLKf000.1566_LLK5247429013.2523_SupportThreshold0.13454.cxi
Calculating modes from the imported objects
Matching arrays against the first one [S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T16-00-03_Run0014_LLKf000.1492_LLK5000025629.9973_SupportThreshold0.13282.cxi] - this may take a while
R_match(0, 1) = 72.605% [3 arrays remaining]
R_match(0, 2) = 75.313% [2 arrays remaining]
R_match(0, 3) = 71.206% [1 arrays remaining]
R_match(0, 4) = 69.945% [0 arrays remaining]
Elapsed time:   36.1s
Analysing modes
First mode represents 77.865%
Saving modes analysis to: modes.h5

do it again with better mask

(pynx-gap.p9) p9-07:50_Ar/S1404/pynxraw % python pynx-id01cdi.py pynx-cdi-input_50.txt
/data/id01/inhouse/richard/pynx-gap.p9/lib/python3.8/site-packages/skcuda/cublas.py:284: UserWarning: creating CUBLAS context to get version number
  warnings.warn('creating CUBLAS context to get version number')
Using parameters file:  pynx-cdi-input_50.txt
data S1404_pynx_norm_128_300_294_1_1_1.npz
mask S1404_maskpynx_norm_128_300_294_1_1_1.npz
data2cxi True
auto_center_resize False
support filter_sig5_t20_mask_0.2.npz
support_threshold 0.1,0.2
support_only_shrink False
support_update_period 20
support_smooth_width_begin 2
support_smooth_width_end 1
support_post_expand 1,-2,1
mask_interp 8,2
confidence_interval_factor_mask 0.5,1.2
psf True
nb_raar 1000
nb_hio 400
nb_er 300
nb_ml 0
nb_run 50
nb_run_keep 5
zero_mask False
crop_output 0
positivity False
beta 0.9
detwin False
rebin 1,1,1
detector_distance 0.84
pixel_size_detector 55e-6
wavelength 1.3775e-10
verbose 100
output_format cxi
live_plot False

Loading data:  S1404_pynx_norm_128_300_294_1_1_1.npz
Finished loading iobs data, with size: 11289600
Data CXI file already exists, not overwriting:  S1404_pynx_norm_128_300_294_1_1_1.cxi
CDI runner: preparing processing unit
Computing FFT speed for available CUDA GPU[ranking by fft, fft_shape=(16, 400, 400)]:
                                        Tesla V100-SXM2-32GB: 32256Mb ,1549.67 Gflop/s
                                        Tesla V100-SXM2-32GB: 32256Mb ,1536.73 Gflop/s
Using CUDA GPU: Tesla V100-SXM2-32GB
Loading mask from:  S1404_maskpynx_norm_128_300_294_1_1_1.npz
Initialized mask, with 887852 pixels masked ( 7.864%)
Rebinning Iobs with rebin=(1,1,1)
Ignoring rebin=1
Loading support from:  filter_sig5_t20_mask_0.2.npz
Initialized support  (128, 300, 294) , with 91966 pixels ( 0.815%)
Centering & reshaping data: (128, 300, 294) -> (128, 300, 294)



(devel.p9) p9-07:50_Ar/S1404/pynxraw % python pynx-cdi-analysis.py S1404_pynx_norm_128_300_294_1_1_1-* modes=1
****************************************************************************
* hwloc 2.1.0 received invalid information from the operating system.
*
* Group0 (cpuset 0x0000000f,0xffffffff,0xfffffff0) intersects with Package (P#0 cpuset 0xffffffff,0xfffffff0 nodeset 0x00000001) without inclusion!
* Error occurred in topology.c line 1443
*
* The following FAQ entry in the hwloc documentation may help:
*   What should I do when hwloc reports "operating system" warnings?
* Otherwise please report this error message to the hwloc user's mailing list,
* along with the files generated by the hwloc-gather-topology script.
* 
* hwloc will now ignore this invalid topology information and continue.
****************************************************************************
--------------------------------------------------------------------------
No OpenFabrics connection schemes reported that they were able to be
used on a specific port.  As such, the openib BTL (OpenFabrics
support) will be disabled for this port.

  Local host:           p9-07
  Local device:         mlx5_0
  Local port:           1
  CPCs attempted:       udcm
--------------------------------------------------------------------------
Importing data files
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T23-13-46_Run0006_LLKf000.1773_LLK5120533704.7577_SupportThreshold0.13071.cxi
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T23-30-17_Run0028_LLKf000.1634_LLK6382460594.1772_SupportThreshold0.14350.cxi
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T23-31-23_Run0030_LLKf000.1704_LLK5194931030.2734_SupportThreshold0.13185.cxi
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T23-32-02_Run0031_LLKf000.1647_LLK5284901261.3297_SupportThreshold0.13527.cxi
Loading: S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T23-42-13_Run0048_LLKf000.1612_LLK5332636833.1909_SupportThreshold0.13741.cxi
Calculating modes from the imported objects
Matching arrays against the first one [S1404_pynx_norm_128_300_294_1_1_1-2020-12-22T23-42-13_Run0048_LLKf000.1612_LLK5332636833.1909_SupportThreshold0.13741.cxi] - this may take a while
R_match(0, 1) = 61.362% [3 arrays remaining]
R_match(0, 2) = 73.732% [2 arrays remaining]
R_match(0, 3) = 62.221% [1 arrays remaining]
R_match(0, 4) = 61.745% [0 arrays remaining]
Elapsed time:   58.1s
Analysing modes
First mode represents 82.327%
Saving modes analysis to: modes.h5